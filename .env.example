# Docker Registry Configuration
DOCKER_REGISTRY=ghcr.io
DOCKER_IMAGE=arunavo4/gitea-mirror
DOCKER_TAG=latest

# Application Configuration
NODE_ENV=production
HOST=0.0.0.0
PORT=4321
DATABASE_URL=sqlite://data/gitea-mirror.db

# Security
JWT_SECRET=change-this-to-a-secure-random-string-in-production

# Authentication Configuration
# Primary authentication method: local, forward, oidc
AUTH_METHOD=local

# Allow fallback to local auth if external auth fails
AUTH_ALLOW_LOCAL_FALLBACK=true

# Forward Auth (Header-based) Configuration
# For reverse proxy setups like Authentik, Authelia, etc.
AUTH_FORWARD_USER_HEADER=X-Remote-User
AUTH_FORWARD_EMAIL_HEADER=X-Remote-Email
AUTH_FORWARD_NAME_HEADER=X-Remote-Name
AUTH_FORWARD_GROUPS_HEADER=X-Remote-Groups
# Comma-separated list of trusted proxy IPs (optional)
AUTH_FORWARD_TRUSTED_PROXIES=
# Auto-create users if they don't exist (default: true)
AUTH_FORWARD_AUTO_CREATE=true

# OIDC Configuration
# OIDC provider URL (e.g., https://auth.example.com/application/o/gitea-mirror/)
AUTH_OIDC_ISSUER_URL=
# Client ID from your OIDC provider
AUTH_OIDC_CLIENT_ID=
# Client Secret from your OIDC provider
AUTH_OIDC_CLIENT_SECRET=
# Redirect URI (auto-generated if not provided)
AUTH_OIDC_REDIRECT_URI=
# Scopes to request (comma-separated, default: openid,profile,email)
AUTH_OIDC_SCOPES=openid,profile,email
# Auto-create users if they don't exist (default: true)
AUTH_OIDC_AUTO_CREATE=true
# Claim names for user information
AUTH_OIDC_USERNAME_CLAIM=preferred_username
AUTH_OIDC_EMAIL_CLAIM=email
AUTH_OIDC_NAME_CLAIM=name

# Optional GitHub/Gitea Mirror Configuration (for docker-compose, can also be set via web UI)
# Uncomment and set as needed. These are passed as environment variables to the container.
# GITHUB_USERNAME=your-github-username
# GITHUB_TOKEN=your-github-personal-access-token
# SKIP_FORKS=false
# PRIVATE_REPOSITORIES=false
# MIRROR_ISSUES=false
# MIRROR_WIKI=false
# MIRROR_STARRED=false
# MIRROR_ORGANIZATIONS=false
# PRESERVE_ORG_STRUCTURE=false
# ONLY_MIRROR_ORGS=false
# SKIP_STARRED_ISSUES=false
# GITEA_URL=http://gitea:3000
# GITEA_TOKEN=your-local-gitea-token
# GITEA_USERNAME=your-local-gitea-username
# GITEA_ORGANIZATION=github-mirrors
# GITEA_ORG_VISIBILITY=public
# DELAY=3600

# Optional Database Cleanup Configuration (configured via web UI)
# These environment variables are optional and only used as defaults
# Users can configure cleanup settings through the web interface
# CLEANUP_ENABLED=false
# CLEANUP_RETENTION_DAYS=7
